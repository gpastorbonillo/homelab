---
- name: Update web servers
  hosts: localhost
  become: yes
  tasks:

  - name: Make gpastor sudo passwordless
    lineinfile:
      path: /etc/sudoers
      state: present
      regexp: '^%gpastor'
      line: '%wheel ALL=(ALL) NOPASSWD: ALL'
      validate: 'visudo -cf %s'     
    become: yes

  - name: Set hostname
    ansible.builtin.hostname:
      name: UBNT
      use: systemd
    
  - name: Install & update a list of packages
    ansible.builtin.apt:
      name:
      - ansible
      - git
      - docker
      - docker-compose
      - sshpass
      - tree
      state: latest
      update_cache: yes
